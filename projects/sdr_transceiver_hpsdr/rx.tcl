# Create xlslice
cell xilinx.com:ip:xlslice:1.0 slice_0 {
  DIN_WIDTH 8 DIN_FROM 0 DIN_TO 0 DOUT_WIDTH 1
}

# Create xlslice
cell xilinx.com:ip:xlslice:1.0 slice_1 {
  DIN_WIDTH 160 DIN_FROM 15 DIN_TO 0 DOUT_WIDTH 16
}

# Create axis_clock_converter
cell xilinx.com:ip:axis_clock_converter:1.1 fifo_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 4
} {
  m_axis_aclk /ps_0/FCLK_CLK0
  m_axis_aresetn /rst_0/peripheral_aresetn
}

# Create axis_broadcaster
cell xilinx.com:ip:axis_broadcaster:1.1 bcast_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 2
  NUM_MI 3
  M00_TDATA_REMAP {tdata[15:0]}
  M01_TDATA_REMAP {tdata[31:16]}
  M02_TDATA_REMAP {tdata[31:16]}
} {
  S_AXIS fifo_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_clock_converter
cell xilinx.com:ip:axis_clock_converter:1.1 fifo_1 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 2
} {
  m_axis_aclk /ps_0/FCLK_CLK0
  m_axis_aresetn /rst_0/peripheral_aresetn
}

array set channels {
  0 bcast_0/M00_AXIS
  1 bcast_0/M01_AXIS
  2 bcast_0/M02_AXIS
  3 fifo_1/M_AXIS
}

for {set i 0} {$i <= 3} {incr i} {

  # Create xlslice
  cell xilinx.com:ip:xlslice:1.0 slice_[expr $i + 2] {
    DIN_WIDTH 160 DIN_FROM [expr 32 * $i + 63] DIN_TO [expr 32 * $i + 32] DOUT_WIDTH 32
  }

  # Create axis_constant
  cell pavel-demin:user:axis_constant:1.0 phase_$i {
    AXIS_TDATA_WIDTH 32
  } {
    cfg_data slice_[expr $i + 2]/Dout
    aclk /ps_0/FCLK_CLK0
  }

  # Create dds_compiler
  cell xilinx.com:ip:dds_compiler:6.0 dds_$i {
    DDS_CLOCK_RATE 125
    SPURIOUS_FREE_DYNAMIC_RANGE 138
    FREQUENCY_RESOLUTION 0.2
    PHASE_INCREMENT Streaming
    HAS_TREADY true
    HAS_PHASE_OUT false
    PHASE_WIDTH 30
    OUTPUT_WIDTH 24
    DSP48_USE Minimal
    NEGATIVE_SINE true
  } {
    S_AXIS_PHASE phase_$i/M_AXIS
    aclk /ps_0/FCLK_CLK0
  }

  # Create axis_lfsr
  cell pavel-demin:user:axis_lfsr:1.0 lfsr_$i {} {
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

  # Create cmpy
  cell xilinx.com:ip:cmpy:6.0 mult_$i {
    FLOWCONTROL Blocking
    APORTWIDTH.VALUE_SRC USER
    BPORTWIDTH.VALUE_SRC USER
    APORTWIDTH 14
    BPORTWIDTH 24
    ROUNDMODE Random_Rounding
    OUTPUTWIDTH 25
  } {
    S_AXIS_A $channels($i)
    S_AXIS_B dds_$i/M_AXIS_DATA
    S_AXIS_CTRL lfsr_$i/M_AXIS
    aclk /ps_0/FCLK_CLK0
  }

  # Create axis_broadcaster
  cell xilinx.com:ip:axis_broadcaster:1.1 bcast_[expr $i + 1] {
    S_TDATA_NUM_BYTES.VALUE_SRC USER
    M_TDATA_NUM_BYTES.VALUE_SRC USER
    S_TDATA_NUM_BYTES 8
    M_TDATA_NUM_BYTES 3
    M00_TDATA_REMAP {tdata[23:0]}
    M01_TDATA_REMAP {tdata[55:32]}
  } {
    S_AXIS mult_$i/M_AXIS_DOUT
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}

for {set i 0} {$i <= 7} {incr i} {

  # Create axis_variable
  cell pavel-demin:user:axis_variable:1.0 rate_$i {
    AXIS_TDATA_WIDTH 16
  } {
    cfg_data slice_1/Dout
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler:4.0 cic_$i {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Decimation
    NUMBER_OF_STAGES 6
    SAMPLE_RATE_CHANGES Programmable
    MINIMUM_RATE 125
    MAXIMUM_RATE 8192
    FIXED_OR_INITIAL_RATE 500
    INPUT_SAMPLE_FREQUENCY 125
    CLOCK_FREQUENCY 125
    INPUT_DATA_WIDTH 24
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 24
    USE_XTREME_DSP_SLICE false
    HAS_DOUT_TREADY true
    HAS_ARESETN true
  } {
    S_AXIS_DATA bcast_[expr $i / 2 + 1]/M0[expr $i % 2]_AXIS
    S_AXIS_CONFIG rate_$i/M_AXIS
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner:1.1 comb_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 3
  NUM_SI 8
} {
  S00_AXIS cic_0/M_AXIS_DATA
  S01_AXIS cic_1/M_AXIS_DATA
  S02_AXIS cic_2/M_AXIS_DATA
  S03_AXIS cic_3/M_AXIS_DATA
  S04_AXIS cic_4/M_AXIS_DATA
  S05_AXIS cic_5/M_AXIS_DATA
  S06_AXIS cic_6/M_AXIS_DATA
  S07_AXIS cic_7/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter:1.1 conv_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 24
  M_TDATA_NUM_BYTES 3
} {
  S_AXIS comb_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler:7.2 fir_0 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 24
  COEFFICIENTVECTOR {-7.6496139395e-09, -5.6619982915e-09, -3.0592338451e-09, 1.6052840850e-10, 3.9827176563e-09, 8.3747654769e-09, 1.3284727948e-08, 1.8640150642e-08, 2.4347218664e-08, 3.0290232273e-08, 3.6331446217e-08, 4.2311307726e-08, 4.8049124074e-08, 5.3344185830e-08, 5.7977366343e-08, 6.1713211701e-08, 6.4302528436e-08, 6.5485468652e-08, 6.4995104120e-08, 6.2561472367e-08, 5.7916068836e-08, 5.0796750142e-08, 4.0953004200e-08, 2.8151533892e-08, 1.2182091930e-08, -7.1365040307e-09, -2.9950255111e-08, -5.6363850369e-08, -8.6434614676e-08, -1.2016663434e-07, -1.5750516421e-07, -1.9833142323e-07, -2.4245788788e-07, -2.8962419288e-07, -3.3949374821e-07, -3.9165117836e-07, -4.4560068541e-07, -5.0076543162e-07, -5.5648802887e-07, -6.1203221277e-07, -6.6658576773e-07, -7.1926475588e-07, -7.6911908804e-07, -8.1513945866e-07, -8.5626564861e-07, -8.9139618109e-07, -9.1939929588e-07, -9.3912518646e-07, -9.4941942311e-07, -9.4913746394e-07, -9.3716013374e-07, -9.1240992987e-07, -8.7386799332e-07, -8.2059156360e-07, -7.5173171784e-07, -6.6655117730e-07, -5.6444194987e-07, -4.4494256438e-07, -3.0775464228e-07, -1.5275854502e-07, 1.9972168813e-08, 2.1015774351e-07, 4.1730094777e-07, 6.4067777580e-07, 8.7933037593e-07, 1.1320624409e-06, 1.3974372759e-06, 1.6737787384e-06, 1.9591752189e-06, 2.2514868016e-06, 2.5483557109e-06, 2.8472201147e-06, 3.1453313140e-06, 3.4397743089e-06, 3.7274916848e-06, 4.0053107165e-06, 4.2699735440e-06, 4.5181702192e-06, 4.7465743811e-06, 4.9518812648e-06, 5.1308477040e-06, 5.2803337410e-06, 5.3973454172e-06, 5.4790782750e-06, 5.5229610661e-06, 5.5266991331e-06, 5.4883168990e-06, 5.4061988836e-06, 5.2791286481e-06, 5.1063250610e-06, 4.8874752812e-06, 4.6227638552e-06, 4.3128973457e-06, 3.9591239284e-06, 3.5632474249e-06, 3.1276352820e-06, 2.6552200515e-06, 2.1494939825e-06, 1.6144964031e-06, 1.0547936356e-06, 4.7545127219e-07, -1.1800128212e-07, -7.1961399836e-07, -1.3230670518e-06, -1.9217290963e-06, -2.5087226901e-06, -3.0769964757e-06, -3.6194036123e-06, -4.1287858538e-06, -4.5980625673e-06, -5.0203238850e-06, -5.3889270913e-06, -5.6975952576e-06, -5.9405170568e-06, -6.1124466191e-06, -6.2088022254e-06, -6.2257625885e-06, -6.1603594290e-06, -6.0105650308e-06, -5.7753734500e-06, -5.4548740538e-06, -5.0503160882e-06, -4.5641630103e-06, -4.0001353712e-06, -3.3632411124e-06, -2.6597922184e-06, -1.8974067805e-06, -1.0849956402e-06, -2.3273292304e-07, 6.4799007842e-07, 1.5446280482e-06, 2.4435620129e-06, 3.3301969404e-06, 4.1890763794e-06, 5.0040137451e-06, 5.7582396438e-06, 6.4345644123e-06, 7.0155548363e-06, 7.4837237920e-06, 7.8217313486e-06, 8.0125956637e-06, 8.0399118064e-06, 7.8880764632e-06, 7.5425163096e-06, 6.9899176795e-06, 6.2184550327e-06, 5.2180156078e-06, 3.9804175646e-06, 2.4996188566e-06, 7.7191404444e-07, -1.2038837426e-06, -3.4262784610e-06, -5.8909471261e-06, -8.5906187128e-06, -1.1514978465e-05, -1.4650599940e-05, -1.7980906901e-05, -2.1486166983e-05, -2.5143518749e-05, -2.8927033509e-05, -3.2807812940e-05, -3.6754123195e-05, -4.0731565851e-05, -4.4703285629e-05, -4.8630214452e-05, -5.2471350949e-05, -5.6184074140e-05, -5.9724489571e-05, -6.3047805742e-05, -6.6108738276e-05, -6.8861938820e-05, -7.1262445306e-05, -7.3266149777e-05, -7.4830279680e-05, -7.5913888129e-05, -7.6478348408e-05, -7.6487847691e-05, -7.5909874750e-05, -7.4715696250e-05, -7.2880816129e-05, -7.0385412473e-05, -6.7214746304e-05, -6.3359536756e-05, -5.8816297219e-05, -5.3587627199e-05, -4.7682454914e-05, -4.1116225914e-05, -3.3911033400e-05, -2.6095686332e-05, -1.7705711929e-05, -8.7832896590e-06, 6.2288552304e-07, 1.0457812341e-05, 2.0660465695e-05, 3.1164152694e-05, 4.1896941681e-05, 5.2782162890e-05, 6.3738978599e-05, 7.4683019797e-05, 8.5527085576e-05, 9.6181900639e-05, 1.0655692551e-04, 1.1656121325e-04, 1.2610430573e-04, 1.3509716187e-04, 1.4345310937e-04, 1.5108881134e-04, 1.5792523798e-04, 1.6388863378e-04, 1.6891146981e-04, 1.7293337048e-04, 1.7590200423e-04, 1.7777392708e-04, 1.7851536853e-04, 1.7810294882e-04, 1.7652431739e-04, 1.7377870235e-04, 1.6987736140e-04, 1.6484392525e-04, 1.5871462523e-04, 1.5153839770e-04, 1.4337685862e-04, 1.3430414305e-04, 1.2440660491e-04, 1.1378237421e-04, 1.0254076966e-04, 9.0801566422e-05, 7.8694119878e-05, 6.6356347983e-05, 5.3933576124e-05, 4.1577250100e-05, 2.9443524281e-05, 1.7691733600e-05, 6.4827595458e-06, -4.0226982064e-06, -1.3665931436e-05, -2.2292099854e-05, -2.9752158688e-05, -3.5904820487e-05, -4.0618533172e-05, -4.3773455447e-05, -4.5263409883e-05, -4.4997793347e-05, -4.2903423992e-05, -3.8926303731e-05, -3.3033275008e-05, -2.5213550771e-05, -1.5480096851e-05, -3.8708464390e-06, 9.5502729418e-06, 2.4692518655e-05, 4.1437735938e-05, 5.9640000905e-05, 7.9125518289e-05, 9.9692786948e-05, 1.2111304424e-04, 1.4313099835e-04, 1.6546585533e-04, 1.8781264542e-04, 2.0984385049e-04, 2.3121133206e-04, 2.5154855647e-04, 2.7047311122e-04, 2.8758950345e-04, 3.0249222890e-04, 3.1476909677e-04, 3.2400479313e-04, 3.2978466277e-04, 3.3169868668e-04, 3.2934562990e-04, 3.2233733196e-04, 3.1030310978e-04, 2.9289424103e-04, 2.6978849384e-04, 2.4069466720e-04, 2.0535710492e-04, 1.6356014494e-04, 1.1513246478e-04, 5.9951283609e-05, -2.0536192666e-06, -7.0896109084e-05, -1.4653016314e-04, -2.2884663974e-04, -3.1767038628e-04, -4.1275772266e-04, -5.1379433431e-04, -6.2039360744e-04, -7.3209543614e-04, -8.4836552861e-04, -9.6859523665e-04, -1.0921019291e-03, -1.2181299267e-03, -1.3458520112e-03, -1.4743715188e-03, -1.6027250227e-03, -1.7298856050e-03, -1.8547667154e-03, -1.9762266072e-03, -2.0930733383e-03, -2.2040703199e-03, -2.3079423889e-03, -2.4033823800e-03, -2.4890581632e-03, -2.5636201139e-03, -2.6257089726e-03, -2.6739640535e-03, -2.7070317526e-03, -2.7235743044e-03, -2.7222787338e-03, -2.7018659464e-03, -2.6610998963e-03, -2.5987967722e-03, -2.5138341377e-03, -2.4051599617e-03, -2.2718014745e-03, -2.1128737841e-03, -1.9275881895e-03, -1.7152601244e-03, -1.4753166713e-03, -1.2073035834e-03, -9.1089175611e-04, -5.8588309226e-04, -2.3221570780e-04, 1.5003157076e-04, 5.6063546267e-04, 9.9922528369e-04, 1.4652808270e-03, 1.9581311053e-03, 2.4769539790e-03, 3.0207766907e-03, 3.5884773185e-03, 4.1787871566e-03, 4.7902940240e-03, 5.4214464955e-03, 6.0705590444e-03, 6.7358180775e-03, 7.4152888393e-03, 8.1069231535e-03, 8.8085679653e-03, 9.5179746420e-03, 1.0232808983e-02, 1.0950661883e-02, 1.1669060597e-02, 1.2385480532e-02, 1.3097357507e-02, 1.3802100403e-02, 1.4497104132e-02, 1.5179762845e-02, 1.5847483301e-02, 1.6497698306e-02, 1.7127880149e-02, 1.7735553951e-02, 1.8318310830e-02, 1.8873820813e-02, 1.9399845405e-02, 1.9894249738e-02, 2.0355014215e-02, 2.0780245586e-02, 2.1168187368e-02, 2.1517229557e-02, 2.1825917557e-02, 2.2092960271e-02, 2.2317237306e-02, 2.2497805233e-02, 2.2633902875e-02, 2.2724955574e-02, 2.2770578423e-02, 2.2770578423e-02, 2.2724955574e-02, 2.2633902875e-02, 2.2497805233e-02, 2.2317237306e-02, 2.2092960271e-02, 2.1825917557e-02, 2.1517229557e-02, 2.1168187368e-02, 2.0780245586e-02, 2.0355014215e-02, 1.9894249738e-02, 1.9399845405e-02, 1.8873820813e-02, 1.8318310830e-02, 1.7735553951e-02, 1.7127880149e-02, 1.6497698306e-02, 1.5847483301e-02, 1.5179762845e-02, 1.4497104132e-02, 1.3802100403e-02, 1.3097357507e-02, 1.2385480532e-02, 1.1669060597e-02, 1.0950661883e-02, 1.0232808983e-02, 9.5179746420e-03, 8.8085679653e-03, 8.1069231535e-03, 7.4152888393e-03, 6.7358180775e-03, 6.0705590444e-03, 5.4214464955e-03, 4.7902940240e-03, 4.1787871566e-03, 3.5884773185e-03, 3.0207766907e-03, 2.4769539790e-03, 1.9581311053e-03, 1.4652808270e-03, 9.9922528369e-04, 5.6063546267e-04, 1.5003157076e-04, -2.3221570780e-04, -5.8588309226e-04, -9.1089175611e-04, -1.2073035834e-03, -1.4753166713e-03, -1.7152601244e-03, -1.9275881895e-03, -2.1128737841e-03, -2.2718014745e-03, -2.4051599617e-03, -2.5138341377e-03, -2.5987967722e-03, -2.6610998963e-03, -2.7018659464e-03, -2.7222787338e-03, -2.7235743044e-03, -2.7070317526e-03, -2.6739640535e-03, -2.6257089726e-03, -2.5636201139e-03, -2.4890581632e-03, -2.4033823800e-03, -2.3079423889e-03, -2.2040703199e-03, -2.0930733383e-03, -1.9762266072e-03, -1.8547667154e-03, -1.7298856050e-03, -1.6027250227e-03, -1.4743715188e-03, -1.3458520112e-03, -1.2181299267e-03, -1.0921019291e-03, -9.6859523665e-04, -8.4836552861e-04, -7.3209543614e-04, -6.2039360744e-04, -5.1379433431e-04, -4.1275772266e-04, -3.1767038628e-04, -2.2884663974e-04, -1.4653016314e-04, -7.0896109084e-05, -2.0536192666e-06, 5.9951283609e-05, 1.1513246478e-04, 1.6356014494e-04, 2.0535710492e-04, 2.4069466720e-04, 2.6978849384e-04, 2.9289424103e-04, 3.1030310978e-04, 3.2233733196e-04, 3.2934562990e-04, 3.3169868668e-04, 3.2978466277e-04, 3.2400479313e-04, 3.1476909677e-04, 3.0249222890e-04, 2.8758950345e-04, 2.7047311122e-04, 2.5154855647e-04, 2.3121133206e-04, 2.0984385049e-04, 1.8781264542e-04, 1.6546585533e-04, 1.4313099835e-04, 1.2111304424e-04, 9.9692786948e-05, 7.9125518289e-05, 5.9640000905e-05, 4.1437735938e-05, 2.4692518655e-05, 9.5502729418e-06, -3.8708464390e-06, -1.5480096851e-05, -2.5213550771e-05, -3.3033275008e-05, -3.8926303731e-05, -4.2903423992e-05, -4.4997793347e-05, -4.5263409883e-05, -4.3773455447e-05, -4.0618533172e-05, -3.5904820487e-05, -2.9752158688e-05, -2.2292099854e-05, -1.3665931436e-05, -4.0226982064e-06, 6.4827595458e-06, 1.7691733600e-05, 2.9443524281e-05, 4.1577250100e-05, 5.3933576124e-05, 6.6356347983e-05, 7.8694119878e-05, 9.0801566422e-05, 1.0254076966e-04, 1.1378237421e-04, 1.2440660491e-04, 1.3430414305e-04, 1.4337685862e-04, 1.5153839770e-04, 1.5871462523e-04, 1.6484392525e-04, 1.6987736140e-04, 1.7377870235e-04, 1.7652431739e-04, 1.7810294882e-04, 1.7851536853e-04, 1.7777392708e-04, 1.7590200423e-04, 1.7293337048e-04, 1.6891146981e-04, 1.6388863378e-04, 1.5792523798e-04, 1.5108881134e-04, 1.4345310937e-04, 1.3509716187e-04, 1.2610430573e-04, 1.1656121325e-04, 1.0655692551e-04, 9.6181900639e-05, 8.5527085576e-05, 7.4683019797e-05, 6.3738978599e-05, 5.2782162890e-05, 4.1896941681e-05, 3.1164152694e-05, 2.0660465695e-05, 1.0457812341e-05, 6.2288552304e-07, -8.7832896590e-06, -1.7705711929e-05, -2.6095686332e-05, -3.3911033400e-05, -4.1116225914e-05, -4.7682454914e-05, -5.3587627199e-05, -5.8816297219e-05, -6.3359536756e-05, -6.7214746304e-05, -7.0385412473e-05, -7.2880816129e-05, -7.4715696250e-05, -7.5909874750e-05, -7.6487847691e-05, -7.6478348408e-05, -7.5913888129e-05, -7.4830279680e-05, -7.3266149777e-05, -7.1262445306e-05, -6.8861938820e-05, -6.6108738276e-05, -6.3047805742e-05, -5.9724489571e-05, -5.6184074140e-05, -5.2471350949e-05, -4.8630214452e-05, -4.4703285629e-05, -4.0731565851e-05, -3.6754123195e-05, -3.2807812940e-05, -2.8927033509e-05, -2.5143518749e-05, -2.1486166983e-05, -1.7980906901e-05, -1.4650599940e-05, -1.1514978465e-05, -8.5906187128e-06, -5.8909471261e-06, -3.4262784610e-06, -1.2038837426e-06, 7.7191404444e-07, 2.4996188566e-06, 3.9804175646e-06, 5.2180156078e-06, 6.2184550327e-06, 6.9899176795e-06, 7.5425163096e-06, 7.8880764632e-06, 8.0399118064e-06, 8.0125956637e-06, 7.8217313486e-06, 7.4837237920e-06, 7.0155548363e-06, 6.4345644123e-06, 5.7582396438e-06, 5.0040137451e-06, 4.1890763794e-06, 3.3301969404e-06, 2.4435620129e-06, 1.5446280482e-06, 6.4799007842e-07, -2.3273292305e-07, -1.0849956402e-06, -1.8974067805e-06, -2.6597922184e-06, -3.3632411124e-06, -4.0001353712e-06, -4.5641630103e-06, -5.0503160882e-06, -5.4548740538e-06, -5.7753734500e-06, -6.0105650308e-06, -6.1603594290e-06, -6.2257625885e-06, -6.2088022254e-06, -6.1124466191e-06, -5.9405170568e-06, -5.6975952576e-06, -5.3889270913e-06, -5.0203238850e-06, -4.5980625673e-06, -4.1287858538e-06, -3.6194036123e-06, -3.0769964757e-06, -2.5087226901e-06, -1.9217290963e-06, -1.3230670518e-06, -7.1961399836e-07, -1.1800128212e-07, 4.7545127219e-07, 1.0547936356e-06, 1.6144964031e-06, 2.1494939825e-06, 2.6552200515e-06, 3.1276352820e-06, 3.5632474249e-06, 3.9591239284e-06, 4.3128973457e-06, 4.6227638552e-06, 4.8874752812e-06, 5.1063250610e-06, 5.2791286481e-06, 5.4061988836e-06, 5.4883168990e-06, 5.5266991331e-06, 5.5229610661e-06, 5.4790782750e-06, 5.3973454172e-06, 5.2803337410e-06, 5.1308477040e-06, 4.9518812648e-06, 4.7465743811e-06, 4.5181702192e-06, 4.2699735440e-06, 4.0053107165e-06, 3.7274916848e-06, 3.4397743089e-06, 3.1453313140e-06, 2.8472201147e-06, 2.5483557109e-06, 2.2514868016e-06, 1.9591752189e-06, 1.6737787384e-06, 1.3974372759e-06, 1.1320624409e-06, 8.7933037593e-07, 6.4067777580e-07, 4.1730094777e-07, 2.1015774351e-07, 1.9972168813e-08, -1.5275854502e-07, -3.0775464228e-07, -4.4494256438e-07, -5.6444194987e-07, -6.6655117730e-07, -7.5173171784e-07, -8.2059156360e-07, -8.7386799332e-07, -9.1240992987e-07, -9.3716013374e-07, -9.4913746394e-07, -9.4941942311e-07, -9.3912518646e-07, -9.1939929588e-07, -8.9139618109e-07, -8.5626564861e-07, -8.1513945866e-07, -7.6911908804e-07, -7.1926475588e-07, -6.6658576773e-07, -6.1203221277e-07, -5.5648802887e-07, -5.0076543162e-07, -4.4560068541e-07, -3.9165117836e-07, -3.3949374821e-07, -2.8962419288e-07, -2.4245788788e-07, -1.9833142323e-07, -1.5750516421e-07, -1.2016663434e-07, -8.6434614676e-08, -5.6363850369e-08, -2.9950255111e-08, -7.1365040307e-09, 1.2182091930e-08, 2.8151533892e-08, 4.0953004200e-08, 5.0796750142e-08, 5.7916068836e-08, 6.2561472367e-08, 6.4995104120e-08, 6.5485468652e-08, 6.4302528436e-08, 6.1713211701e-08, 5.7977366343e-08, 5.3344185830e-08, 4.8049124074e-08, 4.2311307726e-08, 3.6331446217e-08, 3.0290232273e-08, 2.4347218664e-08, 1.8640150642e-08, 1.3284727948e-08, 8.3747654769e-09, 3.9827176563e-09, 1.6052840850e-10, -3.0592338451e-09, -5.6619982915e-09, -7.6496139395e-09}
  COEFFICIENT_WIDTH 24
  QUANTIZATION Maximize_Dynamic_Range
  BESTPRECISION true
  FILTER_TYPE Decimation
  RATE_CHANGE_TYPE Fixed_Fractional
  INTERPOLATION_RATE 24
  DECIMATION_RATE 25
  NUMBER_CHANNELS 8
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 1.0
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 25
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter:1.1 subset_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 3
  TDATA_REMAP {tdata[23:0]}
} {
  S_AXIS fir_0/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler:7.2 fir_1 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 24
  COEFFICIENTVECTOR {-4.4361981341e-08, -4.2223400164e-08, -8.9985616670e-09, 4.2138715085e-08, 6.3476073742e-08, -2.4548338313e-08, -3.1110543615e-07, -8.5340462867e-07, -1.6249920310e-06, -2.4718353912e-06, -3.0988022324e-06, -3.1063703829e-06, -2.0855959120e-06, 2.4004152714e-07, 3.8594021160e-06, 8.3558482327e-06, 1.2882032562e-05, 1.6268332786e-05, 1.7272429936e-05, 1.4930833494e-05, 8.9259803009e-06, -1.4860701763e-07, -1.0742183621e-05, -2.0595913774e-05, -2.7285043399e-05, -2.8952260639e-05, -2.5037747581e-05, -1.6758996880e-05, -7.1096540326e-06, -2.4427808713e-07, -2.8408001076e-07, -9.7804762416e-06, -2.8251482842e-05, -5.1296782619e-05, -7.0749349215e-05, -7.6115228589e-05, -5.7214310166e-05, -7.5372617728e-06, 7.2513579972e-05, 1.7350986413e-04, 2.7693515495e-04, 3.5771809143e-04, 3.8927036782e-04, 3.5018812989e-04, 2.3110331030e-04, 3.9793032050e-05, -1.9725641784e-04, -4.3800729726e-04, -6.3283002658e-04, -7.3600005680e-04, -7.1820902533e-04, -5.7677244004e-04, -3.4020367323e-04, -6.4753309232e-05, 1.7769090376e-04, 3.1861657622e-04, 3.1476099928e-04, 1.6712503337e-04, -6.9027534381e-05, -2.8816969961e-04, -3.5472409951e-04, -1.3775698435e-04, 4.4589012940e-04, 1.3897020137e-03, 2.5683815002e-03, 3.7324350691e-03, 4.5338648341e-03, 4.5844026836e-03, 3.5402706579e-03, 1.2000438145e-03, -2.4034398437e-03, -6.9384693712e-03, -1.1756440796e-02, -1.5933158608e-02, -1.8371966836e-02, -1.7959071887e-02, -1.3749704392e-02, -5.1549841246e-03, 7.9043858637e-03, 2.4908926978e-02, 4.4738178370e-02, 6.5764084464e-02, 8.6032073737e-02, 1.0350584342e-01, 1.1633934876e-01, 1.2313310714e-01, 1.2313310714e-01, 1.1633934876e-01, 1.0350584342e-01, 8.6032073737e-02, 6.5764084464e-02, 4.4738178370e-02, 2.4908926978e-02, 7.9043858637e-03, -5.1549841246e-03, -1.3749704392e-02, -1.7959071887e-02, -1.8371966836e-02, -1.5933158608e-02, -1.1756440796e-02, -6.9384693712e-03, -2.4034398437e-03, 1.2000438145e-03, 3.5402706579e-03, 4.5844026836e-03, 4.5338648341e-03, 3.7324350691e-03, 2.5683815002e-03, 1.3897020137e-03, 4.4589012940e-04, -1.3775698435e-04, -3.5472409951e-04, -2.8816969961e-04, -6.9027534381e-05, 1.6712503337e-04, 3.1476099928e-04, 3.1861657622e-04, 1.7769090376e-04, -6.4753309232e-05, -3.4020367323e-04, -5.7677244004e-04, -7.1820902533e-04, -7.3600005680e-04, -6.3283002658e-04, -4.3800729726e-04, -1.9725641784e-04, 3.9793032050e-05, 2.3110331030e-04, 3.5018812989e-04, 3.8927036782e-04, 3.5771809143e-04, 2.7693515495e-04, 1.7350986413e-04, 7.2513579972e-05, -7.5372617728e-06, -5.7214310166e-05, -7.6115228589e-05, -7.0749349215e-05, -5.1296782619e-05, -2.8251482842e-05, -9.7804762416e-06, -2.8408001076e-07, -2.4427808713e-07, -7.1096540326e-06, -1.6758996880e-05, -2.5037747581e-05, -2.8952260639e-05, -2.7285043399e-05, -2.0595913774e-05, -1.0742183621e-05, -1.4860701763e-07, 8.9259803009e-06, 1.4930833494e-05, 1.7272429936e-05, 1.6268332786e-05, 1.2882032562e-05, 8.3558482327e-06, 3.8594021160e-06, 2.4004152714e-07, -2.0855959120e-06, -3.1063703829e-06, -3.0988022324e-06, -2.4718353912e-06, -1.6249920310e-06, -8.5340462867e-07, -3.1110543615e-07, -2.4548338313e-08, 6.3476073742e-08, 4.2138715085e-08, -8.9985616670e-09, -4.2223400164e-08, -4.4361981341e-08}
  COEFFICIENT_WIDTH 24
  QUANTIZATION Maximize_Dynamic_Range
  BESTPRECISION true
  FILTER_TYPE Decimation
  RATE_CHANGE_TYPE Fixed_Fractional
  INTERPOLATION_RATE 4
  DECIMATION_RATE 5
  NUMBER_CHANNELS 8
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 0.96
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 25
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA subset_0/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter:1.1 subset_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 3
  TDATA_REMAP {tdata[23:0]}
} {
  S_AXIS fir_1/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler:7.2 fir_2 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 24
  COEFFICIENTVECTOR {-1.6477639552e-08, -4.7322398249e-08, -7.9311409775e-10, 3.0934160749e-08, 1.8626860457e-08, 3.2748557120e-08, -6.2990865366e-09, -1.5227986158e-07, -8.3046084786e-08, 3.1453549182e-07, 3.0562673833e-07, -4.7417269422e-07, -7.1349504942e-07, 5.4732396824e-07, 1.3346218315e-06, -4.1414075502e-07, -2.1505100620e-06, -6.7741001572e-08, 3.0754648545e-06, 1.0370225542e-06, -3.9443639371e-06, -2.5919131159e-06, 4.5153751942e-06, 4.7478257577e-06, -4.4928424580e-06, -7.3982459612e-06, 3.5721630429e-06, 1.0289531399e-05, -1.5038200096e-06, -1.3020866944e-05, -1.8320780741e-06, 1.5078157871e-05, 6.3546486992e-06, -1.5905693254e-05, -1.1732482243e-05, 1.5011014603e-05, 1.7371981550e-05, -1.2094352463e-05, -2.2466882726e-05, 7.1697434417e-06, 2.6103268500e-05, -6.6357607870e-07, -2.7429279457e-05, -6.5506232292e-06, 2.5864354890e-05, 1.3204315242e-05, -2.1317037730e-05, -1.7790015052e-05, 1.4366401658e-05, 1.8819648804e-05, -6.3576957562e-06, -1.5162467161e-05, -6.3454751890e-07, 6.4157454794e-06, 4.0077900105e-06, 6.7576033639e-06, -1.0053804557e-06, -2.2403023407e-05, -1.0762630262e-05, 3.7233383457e-05, 3.2700816121e-05, -4.6860517011e-05, -6.4652658151e-05, 4.6259987990e-05, 1.0440186152e-04, -3.0540394819e-05, -1.4745720335e-04, -4.1201370727e-06, 1.8718591031e-04, 5.9472285269e-05, -2.1537491758e-04, -1.3430207308e-04, 2.2322415298e-04, 2.2383529854e-04, -2.0270064628e-04, -3.1962371627e-04, 1.4809620807e-04, 4.1005036861e-04, -5.7559785442e-05, -4.8151499596e-04, -6.5676313349e-05, 5.2025099911e-04, 2.1266416434e-04, -5.1461871942e-04, -3.6900584284e-04, 4.5746738987e-04, 5.1597365609e-04, -3.4847793976e-04, -6.3288127995e-04, 1.9564979495e-04, 7.0018874915e-04, -1.5799271763e-05, -7.0320539204e-04, -1.6637669771e-04, 6.3584392061e-04, 3.2083226194e-04, -5.0381108421e-04, -4.1625531993e-04, 3.2656999167e-04, 4.2539187592e-04, -1.3746695449e-04, -3.3104533584e-04, -1.8432241920e-05, 1.3195287043e-04, 8.8991373620e-05, 1.5240645111e-04, -2.2005955258e-05, -4.7910932766e-04, -2.2615894370e-04, 7.8159610890e-04, 6.8033628724e-04, -9.7384157378e-04, -1.3374308681e-03, 9.5750542955e-04, 2.1582379593e-03, -6.3305849791e-04, -3.0623958357e-03, -8.6277386830e-05, 3.9274923777e-03, 1.2589008658e-03, -4.5932013829e-03, -2.8990646220e-03, 4.8708089214e-03, 4.9627165218e-03, -4.5578812687e-03, -7.3366723336e-03, 3.4571636048e-03, 9.8325360800e-03, -1.3981932434e-03, -1.2186163713e-02, -1.7403432886e-03, 1.4062282609e-02, 6.0085367250e-03, -1.5065575155e-02, -1.1370141606e-02, 1.4748357578e-02, 1.7687227432e-02, -1.2618525849e-02, -2.4713165549e-02, 8.1309035026e-03, 3.2086471101e-02, -6.4515135347e-04, -3.9317049352e-02, -1.0692407507e-02, 4.5736643978e-02, 2.7250170322e-02, -5.0321471240e-02, -5.1715839268e-02, 5.1019578536e-02, 9.0570896036e-02, -4.1608582780e-02, -1.6374794004e-01, -1.0799124751e-02, 3.5639198057e-01, 5.5482162063e-01, 3.5639198057e-01, -1.0799124751e-02, -1.6374794004e-01, -4.1608582780e-02, 9.0570896036e-02, 5.1019578536e-02, -5.1715839268e-02, -5.0321471240e-02, 2.7250170322e-02, 4.5736643978e-02, -1.0692407507e-02, -3.9317049352e-02, -6.4515135347e-04, 3.2086471101e-02, 8.1309035026e-03, -2.4713165549e-02, -1.2618525849e-02, 1.7687227432e-02, 1.4748357578e-02, -1.1370141606e-02, -1.5065575155e-02, 6.0085367250e-03, 1.4062282609e-02, -1.7403432886e-03, -1.2186163713e-02, -1.3981932434e-03, 9.8325360800e-03, 3.4571636048e-03, -7.3366723336e-03, -4.5578812687e-03, 4.9627165218e-03, 4.8708089214e-03, -2.8990646220e-03, -4.5932013829e-03, 1.2589008658e-03, 3.9274923777e-03, -8.6277386830e-05, -3.0623958357e-03, -6.3305849791e-04, 2.1582379593e-03, 9.5750542955e-04, -1.3374308681e-03, -9.7384157378e-04, 6.8033628724e-04, 7.8159610890e-04, -2.2615894370e-04, -4.7910932766e-04, -2.2005955258e-05, 1.5240645111e-04, 8.8991373620e-05, 1.3195287043e-04, -1.8432241920e-05, -3.3104533584e-04, -1.3746695449e-04, 4.2539187592e-04, 3.2656999167e-04, -4.1625531993e-04, -5.0381108421e-04, 3.2083226194e-04, 6.3584392061e-04, -1.6637669771e-04, -7.0320539204e-04, -1.5799271763e-05, 7.0018874915e-04, 1.9564979495e-04, -6.3288127995e-04, -3.4847793976e-04, 5.1597365609e-04, 4.5746738987e-04, -3.6900584284e-04, -5.1461871942e-04, 2.1266416434e-04, 5.2025099911e-04, -6.5676313349e-05, -4.8151499596e-04, -5.7559785442e-05, 4.1005036861e-04, 1.4809620807e-04, -3.1962371627e-04, -2.0270064628e-04, 2.2383529854e-04, 2.2322415298e-04, -1.3430207308e-04, -2.1537491758e-04, 5.9472285269e-05, 1.8718591031e-04, -4.1201370727e-06, -1.4745720335e-04, -3.0540394819e-05, 1.0440186152e-04, 4.6259987990e-05, -6.4652658151e-05, -4.6860517011e-05, 3.2700816121e-05, 3.7233383457e-05, -1.0762630262e-05, -2.2403023407e-05, -1.0053804557e-06, 6.7576033639e-06, 4.0077900105e-06, 6.4157454794e-06, -6.3454751890e-07, -1.5162467161e-05, -6.3576957562e-06, 1.8819648804e-05, 1.4366401658e-05, -1.7790015052e-05, -2.1317037730e-05, 1.3204315242e-05, 2.5864354890e-05, -6.5506232292e-06, -2.7429279457e-05, -6.6357607870e-07, 2.6103268500e-05, 7.1697434417e-06, -2.2466882726e-05, -1.2094352463e-05, 1.7371981550e-05, 1.5011014603e-05, -1.1732482243e-05, -1.5905693254e-05, 6.3546486992e-06, 1.5078157871e-05, -1.8320780741e-06, -1.3020866944e-05, -1.5038200096e-06, 1.0289531399e-05, 3.5721630429e-06, -7.3982459612e-06, -4.4928424580e-06, 4.7478257577e-06, 4.5153751942e-06, -2.5919131159e-06, -3.9443639371e-06, 1.0370225542e-06, 3.0754648545e-06, -6.7741001572e-08, -2.1505100620e-06, -4.1414075502e-07, 1.3346218315e-06, 5.4732396824e-07, -7.1349504942e-07, -4.7417269422e-07, 3.0562673833e-07, 3.1453549182e-07, -8.3046084786e-08, -1.5227986158e-07, -6.2990865366e-09, 3.2748557120e-08, 1.8626860457e-08, 3.0934160749e-08, -7.9311409775e-10, -4.7322398249e-08, -1.6477639552e-08}
  COEFFICIENT_WIDTH 24
  QUANTIZATION Maximize_Dynamic_Range
  BESTPRECISION true
  FILTER_TYPE Decimation
  DECIMATION_RATE 2
  NUMBER_CHANNELS 8
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 0.768
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 25
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA subset_1/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter:1.1 conv_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 32
} {
  S_AXIS fir_2/M_AXIS_DATA
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_broadcaster
cell xilinx.com:ip:axis_broadcaster:1.1 bcast_5 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 32
  M_TDATA_NUM_BYTES 8
  NUM_MI 4
  M00_TDATA_REMAP {tdata[23:16],tdata[39:32],tdata[47:40],tdata[55:48],16'b0000000000000000,tdata[7:0],tdata[15:8]}
  M01_TDATA_REMAP {tdata[87:80],tdata[103:96],tdata[111:104],tdata[119:112],16'b0000000000000000,tdata[71:64],tdata[79:72]}
  M02_TDATA_REMAP {tdata[151:144],tdata[167:160],tdata[175:168],tdata[183:176],16'b0000000000000000,tdata[135:128],tdata[143:136]}
  M03_TDATA_REMAP {tdata[215:208],tdata[231:224],tdata[239:232],tdata[247:240],16'b0000000000000000,tdata[199:192],tdata[207:200]}
} {
  S_AXIS conv_1/M_AXIS
  aclk /ps_0/FCLK_CLK0
  aresetn /rst_0/peripheral_aresetn
}

for {set i 0} {$i <= 3} {incr i} {

  # Create fifo_generator
  cell xilinx.com:ip:fifo_generator:13.0 fifo_generator_$i {
    PERFORMANCE_OPTIONS First_Word_Fall_Through
    INPUT_DATA_WIDTH 64
    INPUT_DEPTH 1024
    OUTPUT_DATA_WIDTH 32
    OUTPUT_DEPTH 2048
    READ_DATA_COUNT true
    READ_DATA_COUNT_WIDTH 12
  } {
    clk /ps_0/FCLK_CLK0
    srst slice_0/Dout
  }

  # Create axis_fifo
  cell pavel-demin:user:axis_fifo:1.0 fifo_[expr $i + 2] {
    S_AXIS_TDATA_WIDTH 64
    M_AXIS_TDATA_WIDTH 32
  } {
    S_AXIS bcast_5/M0${i}_AXIS
    FIFO_READ fifo_generator_$i/FIFO_READ
    FIFO_WRITE fifo_generator_$i/FIFO_WRITE
    aclk /ps_0/FCLK_CLK0
  }

  # Create axi_axis_reader
  cell pavel-demin:user:axi_axis_reader:1.0 reader_$i {
    AXI_DATA_WIDTH 32
  } {
    S_AXIS fifo_[expr $i + 2]/M_AXIS
    aclk /ps_0/FCLK_CLK0
    aresetn /rst_0/peripheral_aresetn
  }

}
