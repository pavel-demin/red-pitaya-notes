# Create port_slicer
cell pavel-demin:user:port_slicer slice_0 {
  DIN_WIDTH 8 DIN_FROM 2 DIN_TO 2
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_1 {
  DIN_WIDTH 64 DIN_FROM 31 DIN_TO 0
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_2 {
  DIN_WIDTH 64 DIN_FROM 47 DIN_TO 32
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_3 {
  DIN_WIDTH 64 DIN_FROM 63 DIN_TO 48
}

# Create xlconcat
cell xilinx.com:ip:xlconcat concat_0 {
  NUM_PORTS 3
  IN0_WIDTH 32
  IN1_WIDTH 32
  IN2_WIDTH 1
} {
  In0 slice_1/dout
}

# Create axis_constant
cell pavel-demin:user:axis_constant phase_0 {
  AXIS_TDATA_WIDTH 65
} {
  cfg_data concat_0/dout
  aclk /pll_0/clk_out1
}

# Create dds_compiler
cell xilinx.com:ip:dds_compiler dds_0 {
  DDS_CLOCK_RATE 122.88
  SPURIOUS_FREE_DYNAMIC_RANGE 138
  FREQUENCY_RESOLUTION 0.2
  PHASE_INCREMENT Streaming
  PHASE_OFFSET Streaming
  HAS_PHASE_OUT false
  PHASE_WIDTH 30
  OUTPUT_WIDTH 24
  DSP48_USE Minimal
  NEGATIVE_SINE true
  RESYNC true
} {
  S_AXIS_PHASE phase_0/M_AXIS
  aclk /pll_0/clk_out1
}

# Create xlconstant
cell xilinx.com:ip:xlconstant const_0

for {set i 0} {$i <= 1} {incr i} {

  # Create port_slicer
  cell pavel-demin:user:port_slicer dds_slice_$i {
    DIN_WIDTH 48 DIN_FROM [expr 24 * $i + 23] DIN_TO [expr 24 * $i]
  } {
    din dds_0/m_axis_data_tdata
  }

}

for {set i 0} {$i <= 3} {incr i} {

  # Create port_slicer
  cell pavel-demin:user:port_slicer adc_slice_$i {
    DIN_WIDTH 32 DIN_FROM [expr 16 * ($i / 2) + 13] DIN_TO [expr 16 * ($i / 2)]
  } {
    din /adc_0/m_axis_tdata
  }

  # Create dsp48
  cell pavel-demin:user:dsp48 mult_$i {
    A_WIDTH 24
    B_WIDTH 14
    P_WIDTH 24
  } {
    A dds_slice_[expr $i % 2]/dout
    B adc_slice_$i/dout
    CLK /pll_0/clk_out1
  }

  # Create axis_variable
  cell pavel-demin:user:axis_variable rate_$i {
    AXIS_TDATA_WIDTH 16
  } {
    cfg_data slice_2/dout
    aclk /pll_0/clk_out1
    aresetn /rst_0/peripheral_aresetn
  }

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler cic_$i {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Decimation
    NUMBER_OF_STAGES 6
    SAMPLE_RATE_CHANGES Programmable
    MINIMUM_RATE 48
    MAXIMUM_RATE 6144
    FIXED_OR_INITIAL_RATE 48
    INPUT_SAMPLE_FREQUENCY 122.88
    CLOCK_FREQUENCY 122.88
    INPUT_DATA_WIDTH 24
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 32
    USE_XTREME_DSP_SLICE false
    HAS_DOUT_TREADY true
    HAS_ARESETN true
  } {
    s_axis_data_tdata mult_$i/P
    s_axis_data_tvalid const_0/dout
    S_AXIS_CONFIG rate_$i/M_AXIS
    aclk /pll_0/clk_out1
    aresetn /rst_0/peripheral_aresetn
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner comb_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 4
  NUM_SI 4
} {
  S00_AXIS cic_0/M_AXIS_DATA
  S01_AXIS cic_1/M_AXIS_DATA
  S02_AXIS cic_2/M_AXIS_DATA
  S03_AXIS cic_3/M_AXIS_DATA
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 16
  M_TDATA_NUM_BYTES 4
} {
  S_AXIS comb_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler fir_0 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 32
  COEFFICIENTVECTOR {-2.6223520186e-08, -1.4569510722e-08, 2.3539862766e-08, 9.9047791903e-09, -1.1896019720e-08, 3.6952501345e-09, -1.1332649249e-08, -3.0448254274e-08, 4.8780285001e-08, 7.5480680587e-08, -1.0298556558e-07, -1.4488183780e-07, 1.7621752878e-07, 2.4569356482e-07, -2.7029715663e-07, -3.8586728827e-07, 3.8639163532e-07, 5.7415503696e-07, -5.2481626623e-07, -8.1995724612e-07, 6.8482496192e-07, 1.1330985920e-06, -8.6441884919e-07, -1.5235472050e-06, 1.0601603449e-06, 2.0010444195e-06, -1.2670386512e-06, -2.5746764495e-06, 1.4783596529e-06, 3.2522933584e-06, -1.6859211452e-06, -4.0402991396e-06, 1.8795937756e-06, 4.9425284693e-06, -2.0479156212e-06, -5.9599120834e-06, 2.1781663829e-06, 7.0897241021e-06, -2.2567644721e-06, -8.3249249008e-06, 2.2697159996e-06, 9.6534323092e-06, -2.2032964818e-06, -1.1057525530e-05, 2.0447980592e-06, 1.2513266309e-05, -1.7834563820e-06, -1.3990074083e-05, 1.4114273762e-06, 1.5450336139e-05, -9.2496282877e-07, -1.6849237017e-05, 3.2556911113e-07, 1.8134362588e-05, 3.7764886720e-07, -1.9247716939e-05, -1.1690216547e-06, 2.0123590822e-05, 2.0226051591e-06, -2.0691000383e-05, -2.9017686470e-06, 2.0874379435e-05, 3.7578355759e-06, -2.0595028162e-05, -4.5291213709e-06, 1.9772605411e-05, 5.1398635708e-06, -1.8327224916e-05, -5.4996532598e-06, 1.6181674857e-05, 5.5030595072e-06, -1.3264069937e-05, -5.0298894183e-06, 9.5104437117e-06, 3.9456701726e-06, -4.8676680545e-06, -2.1030111130e-06, -7.0497046277e-07, -6.6042627849e-07, 7.2262824576e-06, 4.5109958086e-06, -1.4699659161e-05, -9.6246968910e-06, 2.3104035958e-05, 1.6180218200e-05, -3.2392545858e-05, -2.4355018849e-05, 4.2490046118e-05, 3.4320107121e-05, -5.3291679926e-05, -4.6234864739e-05, 6.4661320689e-05, 6.0240695912e-05, -7.6431116931e-05, -7.6454438571e-05, 8.8401478221e-05, 9.4960742298e-05, -1.0034266110e-04, -1.1580456085e-04, 1.1199716697e-04, 1.3898248645e-04, -1.2308751206e-04, -1.6444573176e-04, 1.3330171817e-04, 1.9206615267e-04, -1.4232796268e-04, -2.2165433634e-04, 1.4984331388e-04, 2.5294208356e-04, -1.5552634959e-04, -2.8557664091e-04, 1.5906699625e-04, 3.1911447359e-04, -1.6017857583e-04, -3.5301729888e-04, 1.5860975761e-04, 3.8664826320e-04, -1.5415839986e-04, -4.1927012469e-04, 1.4668568108e-04, 4.5004394679e-04, -1.3613233973e-04, -4.7803027602e-04, 1.2253553295e-04, 5.0219023604e-04, -1.0605730210e-04, -5.2142029972e-04, 8.6949637028e-05, 5.3448861276e-04, -6.5649923141e-05, -5.4011485848e-04, 4.2747144997e-05, 5.3695375336e-04, -1.9009353315e-05, -5.2361098287e-04, -4.6001652972e-06, 4.9865888453e-04, 2.6906662306e-05, -4.6065583617e-04, -4.6510921087e-05, 4.0816568470e-04, 6.1776299645e-05, -3.3977970721e-04, -7.0818337017e-05, 2.5413807086e-04, 7.1493802871e-05, -1.4995285204e-04, -6.1390007037e-05, 2.6027638077e-05, 3.7786666582e-05, 1.1863866333e-04, 2.2115694331e-06, -2.8501642427e-04, -6.1890365989e-05, 4.7383167175e-04, 1.4479466141e-04, -6.8561784909e-04, -2.5476393609e-04, 9.2068761345e-04, 3.9594147468e-04, -1.1791103158e-03, -5.7278608150e-04, 1.4606896146e-03, 7.9008512861e-04, -1.7649457000e-03, -1.0529756464e-03, 2.0910984805e-03, 1.3669726687e-03, -2.4380560574e-03, -1.7380127633e-03, 2.8044073229e-03, 2.1725211337e-03, -3.1884259936e-03, -2.6775846507e-03, 3.5878285201e-03, 3.2606523607e-03, -4.0003304907e-03, -3.9303149427e-03, 4.4230729113e-03, 4.6961063911e-03, -4.8528362637e-03, -5.5688777366e-03, 5.2860052406e-03, 6.5611947683e-03, -5.7185299441e-03, -7.6878753638e-03, 6.1458672869e-03, 8.9667295556e-03, -6.5628924775e-03, -1.0419599550e-02, 6.9637551431e-03, 1.2073836280e-02, -7.3416534191e-03, -1.3964441957e-02, 7.6884810486e-03, 1.6137281906e-02, -7.9942598824e-03, -1.8654320248e-02, 8.2449768776e-03, 2.1599208794e-02, -8.4233711133e-03, -2.5092435783e-02, 8.5028508277e-03, 2.9310012335e-02, -8.4420113636e-03, -3.4520547360e-02, 8.1711387017e-03, 4.1154586802e-02, -7.5623845879e-03, -4.9946009494e-02, 6.3564436002e-03, 6.2249968965e-02, -3.9556922046e-03, -8.0855272813e-02, -1.2807806287e-03, 1.1245655884e-01, 1.5210259051e-02, -1.7729959466e-01, -7.0419604202e-02, 3.6094753551e-01, 6.1533202636e-01, 3.6094753551e-01, -7.0419604202e-02, -1.7729959466e-01, 1.5210259051e-02, 1.1245655884e-01, -1.2807806287e-03, -8.0855272813e-02, -3.9556922046e-03, 6.2249968965e-02, 6.3564436002e-03, -4.9946009494e-02, -7.5623845879e-03, 4.1154586802e-02, 8.1711387017e-03, -3.4520547360e-02, -8.4420113636e-03, 2.9310012335e-02, 8.5028508277e-03, -2.5092435783e-02, -8.4233711133e-03, 2.1599208794e-02, 8.2449768776e-03, -1.8654320248e-02, -7.9942598824e-03, 1.6137281906e-02, 7.6884810486e-03, -1.3964441957e-02, -7.3416534191e-03, 1.2073836280e-02, 6.9637551431e-03, -1.0419599550e-02, -6.5628924775e-03, 8.9667295556e-03, 6.1458672869e-03, -7.6878753638e-03, -5.7185299441e-03, 6.5611947683e-03, 5.2860052406e-03, -5.5688777366e-03, -4.8528362637e-03, 4.6961063911e-03, 4.4230729113e-03, -3.9303149427e-03, -4.0003304907e-03, 3.2606523607e-03, 3.5878285201e-03, -2.6775846507e-03, -3.1884259936e-03, 2.1725211337e-03, 2.8044073229e-03, -1.7380127633e-03, -2.4380560574e-03, 1.3669726687e-03, 2.0910984805e-03, -1.0529756464e-03, -1.7649457000e-03, 7.9008512861e-04, 1.4606896146e-03, -5.7278608150e-04, -1.1791103158e-03, 3.9594147468e-04, 9.2068761345e-04, -2.5476393609e-04, -6.8561784909e-04, 1.4479466141e-04, 4.7383167175e-04, -6.1890365989e-05, -2.8501642427e-04, 2.2115694331e-06, 1.1863866333e-04, 3.7786666582e-05, 2.6027638077e-05, -6.1390007037e-05, -1.4995285204e-04, 7.1493802871e-05, 2.5413807086e-04, -7.0818337017e-05, -3.3977970721e-04, 6.1776299645e-05, 4.0816568470e-04, -4.6510921087e-05, -4.6065583617e-04, 2.6906662306e-05, 4.9865888453e-04, -4.6001652972e-06, -5.2361098287e-04, -1.9009353315e-05, 5.3695375336e-04, 4.2747144997e-05, -5.4011485848e-04, -6.5649923141e-05, 5.3448861276e-04, 8.6949637028e-05, -5.2142029972e-04, -1.0605730210e-04, 5.0219023604e-04, 1.2253553295e-04, -4.7803027602e-04, -1.3613233973e-04, 4.5004394679e-04, 1.4668568108e-04, -4.1927012469e-04, -1.5415839986e-04, 3.8664826320e-04, 1.5860975761e-04, -3.5301729888e-04, -1.6017857583e-04, 3.1911447359e-04, 1.5906699625e-04, -2.8557664091e-04, -1.5552634959e-04, 2.5294208356e-04, 1.4984331388e-04, -2.2165433634e-04, -1.4232796268e-04, 1.9206615267e-04, 1.3330171817e-04, -1.6444573176e-04, -1.2308751206e-04, 1.3898248645e-04, 1.1199716697e-04, -1.1580456085e-04, -1.0034266110e-04, 9.4960742298e-05, 8.8401478221e-05, -7.6454438571e-05, -7.6431116931e-05, 6.0240695912e-05, 6.4661320689e-05, -4.6234864739e-05, -5.3291679926e-05, 3.4320107121e-05, 4.2490046118e-05, -2.4355018849e-05, -3.2392545858e-05, 1.6180218200e-05, 2.3104035958e-05, -9.6246968910e-06, -1.4699659161e-05, 4.5109958086e-06, 7.2262824576e-06, -6.6042627849e-07, -7.0497046277e-07, -2.1030111130e-06, -4.8676680545e-06, 3.9456701726e-06, 9.5104437117e-06, -5.0298894183e-06, -1.3264069937e-05, 5.5030595072e-06, 1.6181674857e-05, -5.4996532598e-06, -1.8327224916e-05, 5.1398635708e-06, 1.9772605411e-05, -4.5291213709e-06, -2.0595028162e-05, 3.7578355759e-06, 2.0874379435e-05, -2.9017686470e-06, -2.0691000383e-05, 2.0226051591e-06, 2.0123590822e-05, -1.1690216547e-06, -1.9247716939e-05, 3.7764886720e-07, 1.8134362588e-05, 3.2556911113e-07, -1.6849237017e-05, -9.2496282877e-07, 1.5450336139e-05, 1.4114273762e-06, -1.3990074083e-05, -1.7834563820e-06, 1.2513266309e-05, 2.0447980592e-06, -1.1057525530e-05, -2.2032964818e-06, 9.6534323092e-06, 2.2697159996e-06, -8.3249249008e-06, -2.2567644721e-06, 7.0897241021e-06, 2.1781663829e-06, -5.9599120834e-06, -2.0479156212e-06, 4.9425284693e-06, 1.8795937756e-06, -4.0402991396e-06, -1.6859211452e-06, 3.2522933584e-06, 1.4783596529e-06, -2.5746764495e-06, -1.2670386512e-06, 2.0010444195e-06, 1.0601603449e-06, -1.5235472050e-06, -8.6441884919e-07, 1.1330985920e-06, 6.8482496192e-07, -8.1995724612e-07, -5.2481626623e-07, 5.7415503696e-07, 3.8639163532e-07, -3.8586728827e-07, -2.7029715663e-07, 2.4569356482e-07, 1.7621752878e-07, -1.4488183780e-07, -1.0298556558e-07, 7.5480680587e-08, 4.8780285001e-08, -3.0448254274e-08, -1.1332649249e-08, 3.6952501345e-09, -1.1896019720e-08, 9.9047791903e-09, 2.3539862766e-08, -1.4569510722e-08, -2.6223520186e-08}
  COEFFICIENT_WIDTH 24
  QUANTIZATION Quantize_Only
  BESTPRECISION true
  FILTER_TYPE Decimation
  DECIMATION_RATE 2
  NUMBER_CHANNELS 4
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 2.56
  CLOCK_FREQUENCY 122.88
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 26
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter subset_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 3
  TDATA_REMAP {tdata[23:0]}
} {
  S_AXIS fir_0/M_AXIS_DATA
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create floating_point
cell xilinx.com:ip:floating_point fp_0 {
  OPERATION_TYPE Fixed_to_float
  A_PRECISION_TYPE.VALUE_SRC USER
  C_A_EXPONENT_WIDTH.VALUE_SRC USER
  C_A_FRACTION_WIDTH.VALUE_SRC USER
  A_PRECISION_TYPE Custom
  C_A_EXPONENT_WIDTH 2
  C_A_FRACTION_WIDTH 22
  RESULT_PRECISION_TYPE Single
  HAS_ARESETN true
} {
  S_AXIS_A subset_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 16
} {
  S_AXIS fp_0/M_AXIS_RESULT
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_fifo
cell pavel-demin:user:axis_fifo fifo_0 {
  S_AXIS_TDATA_WIDTH 128
  M_AXIS_TDATA_WIDTH 32
  WRITE_DEPTH 4096
  ALWAYS_READY TRUE
} {
  aclk /pll_0/clk_out1
  aresetn slice_0/dout
}

# Create dsp48
cell pavel-demin:user:dsp48 mult_4 {
  A_WIDTH 24
  B_WIDTH 16
  P_WIDTH 14
} {
  A dds_slice_0/dout
  B slice_3/dout
  CLK /pll_0/clk_out1
}

# Create axis_constant
cell pavel-demin:user:axis_constant output_0 {
  AXIS_TDATA_WIDTH 16
} {
  cfg_data mult_4/P
  aclk /pll_0/clk_out1
}
