# Create port_slicer
cell pavel-demin:user:port_slicer slice_0 {
  DIN_WIDTH 8 DIN_FROM 1 DIN_TO 1
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_1 {
  DIN_WIDTH 64 DIN_FROM 31 DIN_TO 0
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_2 {
  DIN_WIDTH 64 DIN_FROM 47 DIN_TO 32
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_3 {
  DIN_WIDTH 64 DIN_FROM 63 DIN_TO 48
}

# Create xlconcat
cell xilinx.com:ip:xlconcat concat_0 {
  NUM_PORTS 3
  IN0_WIDTH 32
  IN1_WIDTH 32
  IN2_WIDTH 1
} {
  In0 slice_1/dout
}

# Create axis_constant
cell pavel-demin:user:axis_constant phase_0 {
  AXIS_TDATA_WIDTH 65
} {
  cfg_data concat_0/dout
  aclk /pll_0/clk_out1
}

# Create dds_compiler
cell xilinx.com:ip:dds_compiler dds_0 {
  DDS_CLOCK_RATE 125
  SPURIOUS_FREE_DYNAMIC_RANGE 138
  FREQUENCY_RESOLUTION 0.2
  PHASE_INCREMENT Streaming
  PHASE_OFFSET Streaming
  HAS_PHASE_OUT false
  PHASE_WIDTH 30
  OUTPUT_WIDTH 24
  DSP48_USE Minimal
  NEGATIVE_SINE true
  RESYNC true
} {
  S_AXIS_PHASE phase_0/M_AXIS
  aclk /pll_0/clk_out1
}

# Create xlconstant
cell xilinx.com:ip:xlconstant const_0

for {set i 0} {$i <= 1} {incr i} {

  # Create port_slicer
  cell pavel-demin:user:port_slicer dds_slice_$i {
    DIN_WIDTH 48 DIN_FROM [expr 24 * $i + 23] DIN_TO [expr 24 * $i]
  } {
    din dds_0/m_axis_data_tdata
  }

}

for {set i 0} {$i <= 3} {incr i} {

  # Create port_slicer
  cell pavel-demin:user:port_slicer adc_slice_$i {
    DIN_WIDTH 32 DIN_FROM [expr 16 * ($i / 2) + 13] DIN_TO [expr 16 * ($i / 2)]
  } {
    din /adc_0/m_axis_tdata
  }

  # Create dsp48
  cell pavel-demin:user:dsp48 mult_$i {
    A_WIDTH 24
    B_WIDTH 14
    P_WIDTH 24
  } {
    A dds_slice_[expr $i % 2]/dout
    B adc_slice_$i/dout
    CLK /pll_0/clk_out1
  }

  # Create axis_variable
  cell pavel-demin:user:axis_variable rate_$i {
    AXIS_TDATA_WIDTH 16
  } {
    cfg_data slice_2/dout
    aclk /pll_0/clk_out1
    aresetn /rst_0/peripheral_aresetn
  }

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler cic_$i {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Decimation
    NUMBER_OF_STAGES 6
    SAMPLE_RATE_CHANGES Programmable
    MINIMUM_RATE 50
    MAXIMUM_RATE 5000
    FIXED_OR_INITIAL_RATE 50
    INPUT_SAMPLE_FREQUENCY 125
    CLOCK_FREQUENCY 125
    INPUT_DATA_WIDTH 24
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 32
    USE_XTREME_DSP_SLICE false
    HAS_DOUT_TREADY true
    HAS_ARESETN true
  } {
    s_axis_data_tdata mult_$i/P
    s_axis_data_tvalid const_0/dout
    S_AXIS_CONFIG rate_$i/M_AXIS
    aclk /pll_0/clk_out1
    aresetn /rst_0/peripheral_aresetn
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner comb_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 4
  NUM_SI 4
} {
  S00_AXIS cic_0/M_AXIS_DATA
  S01_AXIS cic_1/M_AXIS_DATA
  S02_AXIS cic_2/M_AXIS_DATA
  S03_AXIS cic_3/M_AXIS_DATA
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 16
  M_TDATA_NUM_BYTES 4
} {
  S_AXIS comb_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler fir_0 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 32
  COEFFICIENTVECTOR {-2.6223975147e-08, -1.4569956509e-08, 2.3540215190e-08, 9.9051929398e-09, -1.1896072055e-08, 3.6950405480e-09, -1.1333150258e-08, -3.0448508288e-08, 4.8781647725e-08, 7.5481763873e-08, -1.0298815106e-07, -1.4488424258e-07, 1.7622174448e-07, 2.4569793005e-07, -2.7030344622e-07, -3.8587441897e-07, 3.8640046384e-07, 5.7416592111e-07, -5.2482810107e-07, -8.1997306835e-07, 6.8484024917e-07, 1.1331207426e-06, -8.6443798588e-07, -1.5235772828e-06, 1.0601836469e-06, 2.0010842274e-06, -1.2670663181e-06, -2.5747279793e-06, 1.4783917311e-06, 3.2523587640e-06, -1.6859574973e-06, -4.0403807108e-06, 1.8796340322e-06, 4.9426285733e-06, -2.0479591531e-06, -5.9600331028e-06, 2.1782122735e-06, 7.0898683577e-06, -2.2568114973e-06, -8.3250945608e-06, 2.2697626172e-06, 9.6536292817e-06, -2.2033408353e-06, -1.1057751343e-05, 2.0448379988e-06, 1.2513521979e-05, -1.7834895045e-06, -1.3990359975e-05, 1.4114510856e-06, 1.5450651816e-05, -9.2497442132e-07, -1.6849581088e-05, 3.2556588902e-07, 1.8134732541e-05, 3.7766942049e-07, -1.9248109048e-05, -1.1690617612e-06, 2.0123999965e-05, 2.0226665164e-06, -2.0691419936e-05, -2.9018521966e-06, 2.0874801174e-05, 3.7579412454e-06, -2.0595442210e-05, -4.5292477980e-06, 1.9773000201e-05, 5.1400078013e-06, -1.8327587209e-05, -5.4998104331e-06, 1.6181989804e-05, 5.5032225338e-06, -1.3264321202e-05, -5.0300486655e-06, 9.5106136471e-06, 3.9458131621e-06, -4.8677379288e-06, -2.1031222333e-06, -7.0502020230e-07, -6.6036614168e-07, 7.2264716239e-06, 4.5110092647e-06, -1.4700007565e-05, -9.6248102931e-06, 2.3104562873e-05, 1.6180461718e-05, -3.2393269443e-05, -2.4355426444e-05, 4.2490982800e-05, 3.4320716406e-05, -5.3292843755e-05, -4.6235716733e-05, 6.4662722660e-05, 6.0241834662e-05, -7.6432764290e-05, -7.6455910631e-05, 8.8403373773e-05, 9.4962596036e-05, -1.0034480255e-04, -1.1580684559e-04, 1.1199954637e-04, 1.3898525149e-04, -1.2309011539e-04, -1.6444902550e-04, 1.3330452433e-04, 1.9207002071e-04, -1.4233094372e-04, -2.2165882023e-04, 1.4984643477e-04, 2.5294721919e-04, -1.5552956818e-04, -2.8558245672e-04, 1.5907026350e-04, 3.1912098860e-04, -1.6018183630e-04, -3.5302452068e-04, 1.5861295023e-04, 3.8665618589e-04, -1.5416145897e-04, -4.1927872672e-04, 1.4668853776e-04, 4.5005318883e-04, -1.3613492352e-04, -4.7804009874e-04, 1.2253777401e-04, 5.0220055816e-04, -1.0605913395e-04, -5.2143101700e-04, 8.6950997794e-05, 5.3449959453e-04, -6.5650760177e-05, -5.4012594699e-04, 4.2747418076e-05, 5.3696476255e-04, -1.9009038361e-05, -5.2362169735e-04, -4.6010720489e-06, 4.9866905893e-04, 2.6908139781e-05, -4.6066519491e-04, -4.6512918573e-05, 4.0817392222e-04, 6.1778731721e-05, -3.3978648868e-04, -7.0821078285e-05, 2.5414303331e-04, 7.1496682407e-05, -1.4995560596e-04, -6.1392802404e-05, 2.6027769778e-05, 3.7789097072e-05, 1.1864158633e-04, 2.2098447136e-06, -2.8502285446e-04, -6.1889758159e-05, 4.7384207515e-04, 1.4479565716e-04, -6.8563270057e-04, -2.5476710361e-04, 9.2070739171e-04, 3.9594747007e-04, -1.1791354977e-03, -5.7279565538e-04, 1.4607206689e-03, 7.9009913300e-04, -1.7649830807e-03, -1.0529950420e-03, 2.0911426197e-03, 1.3669985326e-03, -2.4381073573e-03, -1.7380462979e-03, 2.8044661485e-03, 2.1725636774e-03, -3.1884926633e-03, -2.6776376923e-03, 3.5879032894e-03, 3.2607175409e-03, -4.0004135555e-03, -3.9303940831e-03, 4.4231643897e-03, 4.6962015129e-03, -4.8529361836e-03, -5.5689910865e-03, 5.2861135257e-03, 6.5613288532e-03, -5.7186463976e-03, -7.6880329967e-03, 6.1459915709e-03, 8.9669139156e-03, -6.5630240865e-03, -1.0419814264e-02, 6.9638933698e-03, 1.2074085532e-02, -7.3417973058e-03, -1.3964730643e-02, 7.6886293201e-03, 1.6137615852e-02, -7.9944108405e-03, -1.8654706529e-02, 8.2451282043e-03, 2.1599656131e-02, -8.4235196753e-03, -2.5092955278e-02, 8.5029922016e-03, 2.9310618515e-02, -8.4421390542e-03, -3.4521259875e-02, 8.1712426755e-03, 4.1155433296e-02, -7.5624482981e-03, -4.9947030690e-02, 6.3564373770e-03, 6.2251228154e-02, -3.9555566932e-03, -8.0856874259e-02, -1.2811831969e-03, 1.1245868024e-01, 1.5211323321e-02, -1.7730246395e-01, -7.0422828663e-02, 3.6094918604e-01, 6.1533693171e-01, 3.6094918604e-01, -7.0422828663e-02, -1.7730246395e-01, 1.5211323321e-02, 1.1245868024e-01, -1.2811831969e-03, -8.0856874259e-02, -3.9555566932e-03, 6.2251228154e-02, 6.3564373770e-03, -4.9947030690e-02, -7.5624482981e-03, 4.1155433296e-02, 8.1712426755e-03, -3.4521259875e-02, -8.4421390542e-03, 2.9310618515e-02, 8.5029922016e-03, -2.5092955278e-02, -8.4235196753e-03, 2.1599656131e-02, 8.2451282043e-03, -1.8654706529e-02, -7.9944108405e-03, 1.6137615852e-02, 7.6886293201e-03, -1.3964730643e-02, -7.3417973058e-03, 1.2074085532e-02, 6.9638933698e-03, -1.0419814264e-02, -6.5630240865e-03, 8.9669139156e-03, 6.1459915709e-03, -7.6880329967e-03, -5.7186463976e-03, 6.5613288532e-03, 5.2861135257e-03, -5.5689910865e-03, -4.8529361836e-03, 4.6962015129e-03, 4.4231643897e-03, -3.9303940831e-03, -4.0004135555e-03, 3.2607175409e-03, 3.5879032894e-03, -2.6776376923e-03, -3.1884926633e-03, 2.1725636774e-03, 2.8044661485e-03, -1.7380462979e-03, -2.4381073573e-03, 1.3669985326e-03, 2.0911426197e-03, -1.0529950420e-03, -1.7649830807e-03, 7.9009913300e-04, 1.4607206689e-03, -5.7279565538e-04, -1.1791354977e-03, 3.9594747007e-04, 9.2070739171e-04, -2.5476710361e-04, -6.8563270057e-04, 1.4479565716e-04, 4.7384207515e-04, -6.1889758159e-05, -2.8502285446e-04, 2.2098447136e-06, 1.1864158633e-04, 3.7789097072e-05, 2.6027769778e-05, -6.1392802404e-05, -1.4995560596e-04, 7.1496682407e-05, 2.5414303331e-04, -7.0821078285e-05, -3.3978648868e-04, 6.1778731721e-05, 4.0817392222e-04, -4.6512918573e-05, -4.6066519491e-04, 2.6908139781e-05, 4.9866905893e-04, -4.6010720489e-06, -5.2362169735e-04, -1.9009038361e-05, 5.3696476255e-04, 4.2747418076e-05, -5.4012594699e-04, -6.5650760177e-05, 5.3449959453e-04, 8.6950997794e-05, -5.2143101700e-04, -1.0605913395e-04, 5.0220055816e-04, 1.2253777401e-04, -4.7804009874e-04, -1.3613492352e-04, 4.5005318883e-04, 1.4668853776e-04, -4.1927872672e-04, -1.5416145897e-04, 3.8665618589e-04, 1.5861295023e-04, -3.5302452068e-04, -1.6018183630e-04, 3.1912098860e-04, 1.5907026350e-04, -2.8558245672e-04, -1.5552956818e-04, 2.5294721919e-04, 1.4984643477e-04, -2.2165882023e-04, -1.4233094372e-04, 1.9207002071e-04, 1.3330452433e-04, -1.6444902550e-04, -1.2309011539e-04, 1.3898525149e-04, 1.1199954637e-04, -1.1580684559e-04, -1.0034480255e-04, 9.4962596036e-05, 8.8403373773e-05, -7.6455910631e-05, -7.6432764290e-05, 6.0241834662e-05, 6.4662722660e-05, -4.6235716733e-05, -5.3292843755e-05, 3.4320716406e-05, 4.2490982800e-05, -2.4355426444e-05, -3.2393269443e-05, 1.6180461718e-05, 2.3104562873e-05, -9.6248102931e-06, -1.4700007565e-05, 4.5110092647e-06, 7.2264716239e-06, -6.6036614168e-07, -7.0502020230e-07, -2.1031222333e-06, -4.8677379288e-06, 3.9458131621e-06, 9.5106136471e-06, -5.0300486655e-06, -1.3264321202e-05, 5.5032225338e-06, 1.6181989804e-05, -5.4998104331e-06, -1.8327587209e-05, 5.1400078013e-06, 1.9773000201e-05, -4.5292477980e-06, -2.0595442210e-05, 3.7579412454e-06, 2.0874801174e-05, -2.9018521966e-06, -2.0691419936e-05, 2.0226665164e-06, 2.0123999965e-05, -1.1690617612e-06, -1.9248109048e-05, 3.7766942049e-07, 1.8134732541e-05, 3.2556588902e-07, -1.6849581088e-05, -9.2497442132e-07, 1.5450651816e-05, 1.4114510856e-06, -1.3990359975e-05, -1.7834895045e-06, 1.2513521979e-05, 2.0448379988e-06, -1.1057751343e-05, -2.2033408353e-06, 9.6536292817e-06, 2.2697626172e-06, -8.3250945608e-06, -2.2568114973e-06, 7.0898683577e-06, 2.1782122735e-06, -5.9600331028e-06, -2.0479591531e-06, 4.9426285733e-06, 1.8796340322e-06, -4.0403807108e-06, -1.6859574973e-06, 3.2523587640e-06, 1.4783917311e-06, -2.5747279793e-06, -1.2670663181e-06, 2.0010842274e-06, 1.0601836469e-06, -1.5235772828e-06, -8.6443798588e-07, 1.1331207426e-06, 6.8484024917e-07, -8.1997306835e-07, -5.2482810107e-07, 5.7416592111e-07, 3.8640046384e-07, -3.8587441897e-07, -2.7030344622e-07, 2.4569793005e-07, 1.7622174448e-07, -1.4488424258e-07, -1.0298815106e-07, 7.5481763873e-08, 4.8781647725e-08, -3.0448508288e-08, -1.1333150258e-08, 3.6950405480e-09, -1.1896072055e-08, 9.9051929398e-09, 2.3540215190e-08, -1.4569956509e-08, -2.6223975147e-08}
  COEFFICIENT_WIDTH 24
  QUANTIZATION Quantize_Only
  BESTPRECISION true
  FILTER_TYPE Decimation
  DECIMATION_RATE 2
  NUMBER_CHANNELS 4
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 2.5
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 34
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_subset_converter
cell xilinx.com:ip:axis_subset_converter subset_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 5
  M_TDATA_NUM_BYTES 4
  TDATA_REMAP {tdata[31:0]}
} {
  S_AXIS fir_0/M_AXIS_DATA
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 16
} {
  S_AXIS subset_0/M_AXIS
  aclk /pll_0/clk_out1
  aresetn /rst_0/peripheral_aresetn
}

# Create axis_fifo
cell pavel-demin:user:axis_fifo fifo_0 {
  S_AXIS_TDATA_WIDTH 128
  M_AXIS_TDATA_WIDTH 32
  WRITE_DEPTH 4096
  ALWAYS_READY TRUE
} {
  aclk /pll_0/clk_out1
  aresetn slice_0/dout
}

# Create dsp48
cell pavel-demin:user:dsp48 mult_4 {
  A_WIDTH 24
  B_WIDTH 16
  P_WIDTH 14
} {
  A dds_slice_0/dout
  B slice_3/dout
  CLK /pll_0/clk_out1
}

# Create axis_constant
cell pavel-demin:user:axis_constant output_0 {
  AXIS_TDATA_WIDTH 16
} {
  cfg_data mult_4/P
  aclk /pll_0/clk_out1
}
